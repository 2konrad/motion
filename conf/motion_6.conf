; /home/pi/motion/conf/motion_4.conf
;
; This config file was generated by Motion 5.0.0-git-20250703-7a7ed327
; at 2025-08-05T08:13:52


daemon off
pid_file 
log_file /home/pi/motion/log/motion.log
log_level 9
log_fflevel 3
log_type ALL
native_language on

;*************************************************
;*****   Camera
;*************************************************
device_name 
device_id 0
device_tmo 30
pause off
schedule_params 
cleandir_params 
target_dir /home/pi/motion/output
watchdog_tmo 30
watchdog_kill 10

;*************************************************
;*****   Source
;*************************************************
v4l2_device 
v4l2_params 
netcam_url 
netcam_params 
netcam_high_url 
netcam_high_params 
netcam_userpass 
libcam_device camera0
libcam_params AfMode=0,LensPosition=0.15,AeMeteringMode=1,AwbMode=0,AeConstraintMode=2,AeExposureMode=0,HdrMode=2

;*************************************************
;*****   Image
;*************************************************
width 1280
height 720
framerate 10
rotate 0
flip_axis none

;*************************************************
;*****   Overlays
;*************************************************
locate_motion_mode on
locate_motion_style box
text_left %m-%d_%{secdetect}_%{timing}ms
text_right %T_%q
text_changes on
text_scale 2
text_event %Y%m%d%H%M%S

;*************************************************
;*****   Method
;*************************************************
emulate_motion off
threshold 40
threshold_maximum 0
threshold_sdevx 0
threshold_sdevy 0
threshold_sdevxy 0
threshold_ratio 0
threshold_ratio_change 0
threshold_tune off
secondary_method dnn
secondary_params model_file=/home/pi/motion/src/frozen_inference_graph_V2.pb,image_type=roi,threshold=0.5,frame_interval=9,config=/home/pi/motion/src/ssd_mobilenet_v2_coco_2018_03_29.pbtxt,classes_file=/home/pi/motion/src/COCO_labels.txt,width=300,height=300,mean=127.5,backend=Tensorflow,framework=Tensorflow

;*************************************************
;*****   Masks
;*************************************************
noise_level 44
noise_tune off
despeckle_filter 
area_detect 
mask_file /home/pi/motion/conf/5.local.pgm
mask_privacy 
smart_mask_speed 0

;*************************************************
;*****   Detection
;*************************************************
lightswitch_percent 0
lightswitch_frames 50
minimum_motion_frames 30
static_object_time 10
event_gap 6
pre_capture 3
post_capture 60

;*************************************************
;*****   Scripts
;*************************************************
on_event_start 
on_event_end 
on_picture_save 
on_area_detected 
on_motion_detected 
on_movie_start 
on_movie_end /home/pi/motion/web_movie_add.sh %{eventid} %{secdetect} %{fps} %w %h
on_camera_lost 
on_camera_found 
on_secondary_detect 
on_action_user 
on_sound_alert 
on_lightswitch 

;*************************************************
;*****   Picture
;*************************************************
picture_output best
picture_output_motion off
picture_type jpg
picture_quality 50
picture_exif 
picture_filename %{eventid}
snapshot_interval 0
snapshot_filename %v-%Y%m%d%H%M%S-snapshot

;*************************************************
;*****   Movie
;*************************************************
movie_output on
movie_output_motion on
movie_max_time 360
movie_bps 1000000
movie_quality 50
movie_container mp4:h264_v4l2m2m
movie_passthrough off
movie_filename %{eventid}
movie_retain all
movie_all_frames on
movie_extpipe_use off
movie_extpipe tee /home/pi/mplus/%{eventid}.yuv >/dev/null

;*************************************************
;*****   Timelapse
;*************************************************
timelapse_interval 0
timelapse_mode daily
timelapse_fps 30
timelapse_container mpg
timelapse_filename %Y%m%d-timelapse

;*************************************************
;*****   Pipes
;*************************************************
video_pipe 
video_pipe_motion 

;*************************************************
;*****   Web Control
;*************************************************
webcontrol_port 8080
webcontrol_port2 0
webcontrol_base_path 
webcontrol_ipv6 off
webcontrol_localhost off
webcontrol_parms 3
webcontrol_interface default
webcontrol_auth_method none
webcontrol_authentication 
webcontrol_tls off
webcontrol_cert 
webcontrol_key 
webcontrol_headers 
webcontrol_html 
webcontrol_actions 
webcontrol_lock_minutes 10
webcontrol_lock_attempts 3
webcontrol_lock_script 

;*************************************************
;*****   Web Stream
;*************************************************
stream_preview_scale 25
stream_preview_newline off
stream_preview_params 
stream_preview_method mjpg
stream_preview_ptz on
stream_quality 50
stream_grey off
stream_motion on
stream_maxrate 10
stream_scan_time 5
stream_scan_scale 25

;*************************************************
;*****   Database
;*************************************************
database_type 
database_dbname motionplus
database_host localhost
database_port 3306
database_user root
database_password root
database_busy_timeout 30

;*************************************************
;*****   SQL
;*************************************************
sql_event_start 
sql_event_end 
sql_movie_start 
sql_movie_end 
sql_pic_save 

;*************************************************
;*****   Tracking
;*************************************************
ptz_auto_track off
ptz_wait 0
ptz_move_track 
ptz_pan_left 
ptz_pan_right 
ptz_tilt_up 
ptz_tilt_down 
ptz_zoom_in 
ptz_zoom_out 

;*************************************************
;*****   Sound
;*************************************************
snd_device 
snd_params 
snd_window hamming
snd_show off

;*************************************************
;*****   Camera
;*************************************************
camera /home/pi/motion/conf/camera1.conf

config_dir 

